body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background-color: #f9f9f9;
    color: #333;
    box-sizing: border-box;
}

/* Global button styling for non-Bootstrap buttons */
button:not(.btn) {
    background-color: #4a90e2;
    color: #fff;
    border: none;
    border-radius: 4px;
    padding: 0.4rem 0.8rem;
    cursor: pointer;
    font-size: 0.9rem;
    line-height: 1.2rem;
}

button:not(.btn):hover {
    opacity: 0.9;
}

button:not(.btn):disabled {
    opacity: 0.6;
    cursor: default;
}

header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background-color: #4a90e2;
    color: #fff;
    flex-wrap: wrap;
}

header h1 {
    margin: 0;
}

.language-toggle {
    display: flex;
    align-items: center;
}

.language-toggle select {
    margin-left: 0.5rem;
    padding: 0.25rem;
}

main {
    flex: 1;
    padding: 1rem;
}

nav {
    display: flex;
    flex-wrap: wrap;
    gap: 0;
    margin-bottom: 1rem;
}

nav button {
    flex: 1 1 20%;
    padding: 0.8rem 0.5rem;
    background-color: #e0e0e0;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    color: #333;
    border-radius: 4px 4px 0 0;
}

nav button.active {
    background-color: #4a90e2;
    color: #fff;
}

/* Responsive adjustments */
@media (max-width: 600px) {
    nav {
        gap: 0.25rem;
    }
    nav button {
        flex: 1 1 45%;
        padding: 0.6rem;
        font-size: 0.9rem;
    }
    header {
        padding: 0.5rem;
    }
    #summary-content, #list-container li, #global-items-container li {
        padding: 0.5rem;
        margin-bottom: 0.5rem;
    }
    .modal {
        max-width: 100%;
    }
}

/* Enhanced mobile and touch improvements */
@media (max-width: 768px) {
    /* Larger touch targets for mobile */
    .btn {
        min-height: 44px;
        min-width: 44px;
        padding: 0.5rem 0.75rem;
    }

    /* Improve checkbox visibility and touch area */
    input[type="checkbox"] {
        width: 20px !important;
        height: 20px !important;
        margin-right: 0.75rem;
    }

    /* Better spacing for list items */
    .list-group-item {
        padding: 1rem;
        margin-bottom: 0.75rem;
    }

    /* Larger category headings */
    .category-heading {
        padding: 0.75rem 0;
        font-size: 1.1rem;
    }

    /* Improved modal close buttons */
    .modal button[onclick*="remove"] {
        font-size: 1.5rem;
        min-width: 44px;
        min-height: 44px;
        padding: 0.5rem;
    }
}

.page {
    display: none;
}

.page.active {
    display: block;
}

.list-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

#list-container {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

#list-container li {
    background-color: #fff;
    padding: 0.75rem;
    margin-bottom: 0.75rem;
    border-radius: 6px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    flex-wrap: wrap;
}

#list-container li button {
    margin-left: 0.5rem;
    margin-top: 0.25rem;
}

.modal {
    background-color: #fff;
    padding: 1rem;
    border-radius: 8px;
    max-width: 500px;
    width: 100%;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    max-height: 90vh;
    overflow-y: auto;
    /* Override Bootstrap's default modal styles */
    display: block;
    position: relative;
}

#modal-overlay,
#item-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 1rem;
}

/* List details overlay inherits same overlay styles */
#list-details-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 900;
}

#list-details-overlay.fullscreen {
    align-items: stretch;
}

#list-details {
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

#items-scroll {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
}

#list-details ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

#list-details li {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: 1rem;
    margin-bottom: 0.5rem;
    background-color: #f5f5f5;
    border-radius: 4px;
    flex-wrap: wrap;
}

#list-details.fullscreen {
    width: 100%;
    height: 100%;
    border-radius: 0;
    max-height: none;
}

.list-details-actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
    margin-top: 1rem;
    flex-wrap: wrap;
}

/* Search input for items */
#item-search {
    width: 100%;
    padding: 0.5rem;
    margin-bottom: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    font-size: 1rem;
}

.hidden {
    display: none !important;
}

/* Category heading in item list */
.category-heading {
    font-weight: bold;
    margin-top: 0.75rem;
    margin-bottom: 0.25rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

#checked-heading {
    margin-top: 1rem;
}

/* Clamp long item text to two lines */
.item-text {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
}

.list-group-item .btn {
    flex-shrink: 0;
}

/* Global item modal overlay style */
#global-item-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 1rem;
}

.modal-actions {
    margin-top: 1rem;
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
}

/* Basic styles for summary */
#summary-content {
    background-color: #fff;
    padding: 1rem;
    border-radius: 4px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

/* RTL Support */
[dir="rtl"] body {
    direction: rtl;
}

[dir="rtl"] .language-toggle label,
[dir="rtl"] .language-toggle select {
    direction: rtl;
}

[dir="rtl"] nav button {
    direction: rtl;
}

/* ====================================================================
   Item Modal Layout Enhancements
   --------------------------------------------------------------------
   Stack each label and its corresponding input/select/textarea on its
   own line within the Add/Edit Item modal.  Without this, the default
   inline behavior causes numeric fields to appear squashed together
   (especially the quantity, estimated price and price basis fields),
   leading to user confusion.  By forcing each element to be a block
   with full width, we improve readability and make it harder to click
   the wrong input.  This also makes the modal responsive on narrow
   screens.
*/
#item-modal-overlay .modal label,
#item-modal-overlay .modal input,
#item-modal-overlay .modal select,
#item-modal-overlay .modal textarea {
    display: block;
    width: 100%;
    margin-bottom: 0.5rem;
}

/* Ensure numeric/text inputs and selects take full width inside the item modal */
#item-modal-overlay .modal input[type="number"],
#item-modal-overlay .modal input[type="text"],
#item-modal-overlay .modal select,
#item-modal-overlay .modal textarea {
    max-width: 100%;
}

/* Suggestions dropdown for item name input */
.suggestions {
    position: absolute;
    background: #fff;
    border: 1px solid #ccc;
    max-height: 150px;
    overflow-y: auto;
    width: 100%;
    z-index: 1100;
}

.suggestions div {
    padding: 0.25rem;
    cursor: pointer;
}

.suggestions div:hover {
    background: #eee;
}

/* Enhanced fullscreen mode */
#list-details-overlay.fullscreen {
    padding: 0;
}

#list-details.fullscreen {
    width: 100vw;
    height: 100vh;
    max-width: none;
    max-height: none;
    border-radius: 0;
    margin: 0;
}

/* Better confirmation dialog positioning */
.confirmation-dialog {
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    z-index: 10001;
    max-width: 400px;
    width: 90%;
}

.confirmation-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 10000;
}

/* Search filter indicator */
.search-active-indicator {
    position: absolute;
    top: 0.5rem;
    right: 3rem;
    background: #ffc107;
    color: #000;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: bold;
    z-index: 100;
    pointer-events: none;
}

/* Enhanced notification positioning for mobile */
@media (max-width: 768px) {
    .notification {
        bottom: 20px !important;
        left: 20px !important;
        right: 20px !important;
        max-width: none !important;
    }
}

/* Better focus indicators for accessibility */
button:focus,
input:focus,
select:focus,
textarea:focus {
    outline: 2px solid #4a90e2;
    outline-offset: 2px;
}

/* Loading states */
.btn.loading {
    position: relative;
    color: transparent;
}

.btn.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 16px;
    height: 16px;
    border: 2px solid currentColor;
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: translate(-50%, -50%) rotate(360deg);
    }
}

/* Enhanced item display */
.item-text {
    line-height: 1.4;
    word-break: break-word;
}

/* Better category organization */
.category-heading button {
    white-space: nowrap;
    font-size: 0.8rem;
}

/* Archive-specific styling */
.archive-list {
    opacity: 0.9;
    border-left: 4px solid #6c757d;
}

.archive-list .btn {
    opacity: 0.8;
}

/* Connection status improvements */
.connection-status {
    animation: slideInFromLeft 0.3s ease-out;
}

@keyframes slideInFromLeft {
    from {
        transform: translateX(-100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Enhanced undo/redo button styling with better visual feedback */
.btn[data-description]:hover::after {
    content: attr(data-description);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 0.75rem;
    white-space: nowrap;
    z-index: 1000;
    margin-bottom: 5px;
    animation: tooltipFadeIn 0.2s ease-out;
}

.btn[data-description]:hover::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: rgba(0, 0, 0, 0.9);
    margin-bottom: 1px;
    z-index: 1000;
}

@keyframes tooltipFadeIn {
    from { opacity: 0; transform: translateX(-50%) translateY(5px); }
    to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* Enhanced notification animations */
@keyframes slideInFromLeft {
    from {
        transform: translateX(-100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Enhanced undo/redo button states */
.btn-warning:not(:disabled) {
    background-color: #f39c12;
    border-color: #e67e22;
    color: white;
}

.btn-warning:not(:disabled):hover {
    background-color: #e67e22;
    border-color: #d35400;
}

.btn-info:not(:disabled) {
    background-color: #3498db;
    border-color: #2980b9;
    color: white;
}

.btn-info:not(:disabled):hover {
    background-color: #2980b9;
    border-color: #1f618d;
}

/* Collaborative editing indicators */
.editing-badge {
    background: linear-gradient(135deg, #2196f3, #1976d2);
    color: white;
    font-size: 0.7rem;
    padding: 3px 8px;
    border-radius: 12px;
    margin-left: 0.5rem;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    animation: pulseGlow 2s infinite;
}

@keyframes pulseGlow {
    0%, 100% { box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); }
    50% { box-shadow: 0 2px 8px rgba(33, 150, 243, 0.5); }
}

.editing-badge i {
    font-size: 0.6rem;
}

/* Connection status improvements */
.connection-status {
    animation: slideInFromLeft 0.3s ease-out;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 500;
}

.connection-status.error {
    animation: shake 0.5s ease-in-out;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* Enhanced presence indicator */
.presence-indicator {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: white;
    font-size: 0.8rem;
    background: rgba(255, 255, 255, 0.1);
    padding: 4px 8px;
    border-radius: 12px;
    transition: all 0.3s ease;
}

.presence-indicator:hover {
    background: rgba(255, 255, 255, 0.2);
}

.presence-indicator .online-count {
    font-weight: bold;
}

.presence-indicator .connection-icon {
    transition: color 0.3s ease;
}

.presence-indicator .connection-icon.connected {
    color: #4caf50;
}

.presence-indicator .connection-icon.disconnected {
    color: #f44336;
}

/* Enhanced merge notification styling */
.merge-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #4caf50, #45a049);
    color: white;
    padding: 12px 16px;
    border-radius: 8px;
    z-index: 10000;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    max-width: 300px;
    animation: slideInFromRight 0.3s ease-out;
}

@keyframes slideInFromRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.merge-notification .title {
    font-weight: 600;
    margin-bottom: 4px;
}

.merge-notification .description {
    font-size: 0.85rem;
    opacity: 0.9;
}

/* Enhanced conflict resolution modal (if needed) */
.conflict-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10001;
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.conflict-modal-content {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    animation: slideInFromBottom 0.3s ease-out;
}

@keyframes slideInFromBottom {
    from {
        transform: translateY(30px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Enhanced list item styling for collaborative editing */
.list-group-item.being-edited {
    background: linear-gradient(90deg, #fff3cd, #ffffff);
    border-left: 4px solid #ffc107;
    animation: gentlePulse 2s infinite;
}

@keyframes gentlePulse {
    0%, 100% { background: linear-gradient(90deg, #fff3cd, #ffffff); }
    50% { background: linear-gradient(90deg, #fffaf0, #ffffff); }
}

/* Better visual hierarchy for operation descriptions in tooltips */
.btn[data-description] {
    position: relative;
}

/* Enhanced loading states for collaborative operations */
.btn.syncing {
    position: relative;
    overflow: hidden;
}

.btn.syncing::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
}

/* Enhanced mobile responsiveness for collaborative features */
@media (max-width: 768px) {
    .editing-badge {
        font-size: 0.6rem;
        padding: 2px 6px;
        margin-left: 0.25rem;
    }

    .presence-indicator {
        font-size: 0.7rem;
        padding: 3px 6px;
    }

    .btn[data-description]:hover::after {
        font-size: 0.7rem;
        padding: 4px 8px;
        max-width: 200px;
        white-space: normal;
        word-wrap: break-word;
    }

    .merge-notification {
        top: 10px;
        right: 10px;
        left: 10px;
        max-width: none;
    }
}

/* Enhanced focus indicators for accessibility in collaborative mode */
.btn:focus-visible {
    outline: 2px solid #4a90e2;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.2);
}

.list-group-item:focus-within {
    background-color: #f8f9fa;
    border-color: #4a90e2;
    box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
}

/* Smooth transitions for all collaborative state changes */
.btn, .list-group-item, .editing-badge, .presence-indicator {
    transition: all 0.3s ease;
}

/* Enhanced error state indicators */
.connection-error {
    color: #dc3545;
    animation: fadeIn 0.5s ease-out;
}

.sync-error {
    background-color: #f8d7da;
    border-color: #f5c6cb;
    color: #721c24;
}
